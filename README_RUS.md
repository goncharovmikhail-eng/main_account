## main_account.sh
main_account.sh - –ü–µ—Ä–≤–∏—á–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –º–µ—Å—Ç–∞. 
–û–±–Ω–æ–≤–ª—è–µ—Ç —Å–∏—Å—Ç–µ–º—É, –∑–∞–ø—É—Å–∫–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –Ω–∞ –≤—ã–±–æ—Ä. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç ansible –∏ upgrading –µ–≥–æ. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç zsh. –ü—Ä–æ–∫–ª–∞–¥—ã–≤–∞–µ—Ç –ø—É—Ç–∏ –∫ alias-–∞–º –∏ ssh –∫–ª—é—á–∞–º, –∫–ª–∞–¥–µ—Ç –∑–∞–ø—É—Å–∫ ssh-agent –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –Ω–æ–≤–æ–π —Å–µ—Å—Å–∏–∏. 
–°–∞–º–∏ ssh –∫–ª—é—á–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ:
- ~/.ssh/goncharov_work
- ~/.ssh/my
- ~/.ssh/test

–ó–∞–≤–∏—Å–∏–º—ã–µ —Å–∫—Ä–∏–ø—Ç—ã: 
- docker-install.sh (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ **https://github.com/goncharovmikhail-eng/docker_worker_install**)
- s3cmd.sh
- setup-ssh-keys.sh
- yc_install.sh

## user.sh
–°–∫—Ä–∏–ø—Ç user.sh –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –ø—Ä–æ–∫–∏–¥—ã–≤–∞–Ω–∏—è –ø—É–±–ª–∏—á–Ω—ã—Ö ssh –∫–ª—é—á–µ–π, –Ω–∞—Å—Ç—Ä–æ–∫–∏ —Å–ª—É–∂–±—ã ssh, –∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –û—á–µ–Ω—å —É–¥–æ–±–µ–Ω –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã –Ω–∞ –ø—É—Å—Ç–æ–π –º–∞—à–∏–Ω–µ. –õ–æ–≥–∏–∫–∞:
- -u [name_user] - –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Ç–æ —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–µ—Ç –µ–≥–æ –±–µ–∑ –ø–∞—Ä–æ–ª—è.
- –°–æ–∑–¥–∞–µ—Ç –ø–∞–ø–∫—É .ssh(–µ—Å–ª–∏ –Ω–µ —Å–æ–∑–¥–∞–Ω–∞) –∏ authorized_keys, –µ—Å–ª–∏ –Ω–µ —Å–æ–∑–¥–∞–Ω. –ù–∞–∑–Ω–∞—á–∞–µ—Ç –∏–º –ø—Ä–∞–≤–∞ 700 –∏ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—É–Ω–∫—Ç–∞ –≤—ã—à–µ.
- –í —Ñ–∞–π–ª–µ /etc/ssh/sshd_config –æ—Ç–∫–ª—é—á–∞–µ—Ç –≤—Ö–æ–¥ –ø–æ –ø–∞—Ä–æ–ª—é, –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ –ø—É–±–ª–∏—á–Ω—ã–π ssh –∫–ª—é—á, –∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –ø–æ—Ä—Ç 22. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–ª—É–∂–±—É.
- –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç –ø–æ–ª–∏—Ç–∏–∫–∏ visudo. –î–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É wheel –∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç –≤–≤–æ–¥ –ø–∞—Ä–æ–ª—è.
- –ü–µ—Ä–µ–≤–æ–¥–∏—Ç –ø–æ–ª–∏—Ç–∏–∫—É SElinux –≤ —Ä–µ–∂–∏–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è. –í–∞–∂–Ω–æ –ó–∞–ø—É—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ—Ç root. –í–Ω—É—Ç—Ä–∏ —Å–∫—Ä–∏–ø—Ç–∞ –µ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞.
- –û–±–Ω–æ–≤–ª—è–µ—Ç –ø–∞–∫–µ—Ç—ã.
**–í–∞–∂–Ω–æ** –ó–∞–ø—É—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ—Ç root. –í–Ω—É—Ç—Ä–∏ —Å–∫—Ä–∏–ø—Ç–∞ –µ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞. –û–°: deb, redhat. 

## üîê form_for_passwords
–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–∞—Ä–æ–ª–µ–π, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π **GPG**-—Ñ–∞–π–ª.
**–ü—Ä–æ–±–ª–µ–º–∞**: –ë—ã–ª –Ω–µ—É–¥–æ–±–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –∫—Ä–µ–¥–∞–º –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π –∏–∑ —ç—Ç–æ–≥–æ —Å–ª–µ–¥–æ–≤–∞–ª–æ - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `.txt` -  –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ.
**–†–µ—à–µ–Ω–∏–µ**: –£–¥–æ–±–Ω–∞—è —Ñ–æ—Ä–º–∞ —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –Ω–µ–π –∏ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª—è –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏.
–ü–æ–¥—Ä–æ–±–Ω–æ–µ README.md –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ form_for_passwords

## –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω –≤ Yandex Cloud
–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–¥–∏–Ω –∏–∑ —Ç—Ä–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–µ—Ä–µ–Ω–æ—Å–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω –≤ Yandex Cloud:
1. **–ü–µ—Ä–µ–Ω–æ—Å VM –º–µ–∂–¥—É –∫–∞—Ç–∞–ª–æ–≥–∞–º–∏** (`move_instance`).
2. **–ò–º–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ —Å–Ω–∏–º–æ–∫** (`import_snapshot`).
3. **–ò–º–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ –æ–±—Ä–∞–∑** (`import_image`).

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π [Yandex Cloud CLI](https://cloud.yandex.ru/docs/cli/quickstart).
- –î–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:
  - `compute.editor` –≤ –æ–±–æ–∏—Ö –∫–∞—Ç–∞–ª–æ–≥–∞—Ö.
  - `vps.editor` –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø–µ—Ä–µ–Ω–æ—Å–∞ VM .

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
–ï—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ main_account.sh:
```bash 
sudo mv mv_vm_yc.sh /usr/local/bin/mv_vm_yc
mv_vm_yc
```
–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Ç–æ `mv_vm_yc` —É–∂–µ –¥–æ—Å—Ç—É–ø–Ω–∞.

## d ‚Äî –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ && p - —Ç–∞–∫–∞—è –∂–µ —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è podman

`d` –∏ `p` ‚Äî —ç—Ç–æ —É–¥–æ–±–Ω—ã–π CLI-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.  
–ü–æ–ª–µ–∑–µ–Ω –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—Ä–∞–∑–æ–≤ –∏ —Ä–∞–±–æ—Ç—ã —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏.

---

### üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `d.sh` –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—É—Ç—å –∏ —Å–¥–µ–ª–∞–π—Ç–µ –µ–≥–æ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:

```bash
sudo cp d.sh /usr/local/bin/doc
sudo chmod +x /usr/local/bin/doc
```
–¢–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ d –∏–∑ –ª—é–±–æ–≥–æ –º–µ—Å—Ç–∞ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
```bash
doc [-d] [-k] [-n <–∏–º—è>] <docker-–æ–±—Ä–∞–∑>
```
| –§–ª–∞–≥       | –û–ø–∏—Å–∞–Ω–∏–µ                                             |
| ---------- | ---------------------------------------------------- |
| `-d`       | –ó–∞–ø—É—Å–∫ disposable-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞: —É–¥–∞–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ |
| `-k`       | –û—Å—Ç–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–∞–±–æ—Ç–∞—é—â–∏–º –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞           |
| `-n <–∏–º—è>` | –ó–∞–¥–∞—Ç—å –∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `box`)          |
–ü–æ—Ä—è–¥–æ–∫ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ –∏–º–µ–µ—Ç.

üß† –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
–ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω—ã -d –∏–ª–∏ -k:
–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ —Å–Ω–∞–ø—à–æ—Ç-–æ–±—Ä–∞–∑ (docker commit)
–ü–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è (docker stop)

üí° –ü—Ä–∏–º–µ—Ä—ã
1. –û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫ Ubuntu:
```bash
doc -d ubuntu
```
2. –ó–∞–ø—É—Å–∫ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π:
```bash
doc ubuntu
```
3. –ó–∞–ø—É—Å–∫ —Å –∏–º–µ–Ω–µ–º devbox, –æ—Å—Ç–∞–≤–∏–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–∞–±–æ—Ç–∞—é—â–∏–º:
```bash
doc -k -n devbox ubuntu
```
–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è `p` - podman

üõ†Ô∏è –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- bash
- docker (–±–µ–∑ sudo –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —á–µ—Ä–µ–∑ Docker group)


### resize_root.sh
–°–∫—Ä–∏–ø—Ç —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞ –Ω–∞ –º–∞—à–∏–Ω—É.

### git_cron.sh
–°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫—Ä–æ–Ω. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π –∏ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.
- –°–Ω–∞—á–∞–ª–∞ –¥–µ–ª–∞–µ—Ç git fetch && git pull –≤–æ –≤—Å–µ—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö –≥–¥–µ –µ—Å—Ç—å .git
- –ü–æ—Ç–æ–º –∫–æ–º–º–∏—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —ç—Ç–∏—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö –∏ –ø—É—à–∏—Ç —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º autocommit.
**ps. –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç–µ –ø–∏—Å–∞—Ç—å–≤ crontab, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é —Å–¥–µ–ª–∞—Ç—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 2 –∫–∞–Ω–∞–ª–æ–≤ –≤—ã–≤–æ–¥–∞ –≤ –ª–æ–≥ —Ñ–∞–π–ª.**
